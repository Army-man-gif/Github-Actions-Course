<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Interactive Git Reference</title>
<style>
    body { font-family: Arial, sans-serif; margin: 20px; max-width: 1200px; line-height: 1.6; }
    h1,h2,h3 { color: #2c3e50; }
    code { background-color: #ecf0f1; padding: 2px 6px; border-radius: 4px; font-family: monospace; }
    pre { background-color: #ecf0f1; padding: 10px; border-radius: 6px; overflow-x: auto; }
    section { margin-bottom: 30px; }
    ul { margin-bottom: 10px; }
    svg { border: 1px solid #ddd; margin: 10px 0; }
    .commit { fill: #3498db; cursor: pointer; }
    .merge-commit { fill: #f39c12; }
    .branch-line { stroke-width: 3; }
    .tooltip { position: absolute; background: #ecf0f1; padding: 8px; border: 1px solid #bdc3c7; border-radius: 4px; display: none; }
    button { margin: 5px 10px 20px 0; padding: 6px 12px; font-size: 14px; cursor: pointer; }
</style>
</head>
<body>

<h1>Interactive Git Reference</h1>
<p>Hover over commits to see explanations. Click buttons to simulate merges and rebases.</p>

<section id="basic-commands">
<h2>1. Basic Git Commands</h2>
<ul>
    <li><code>git init</code>: Initializes a new Git repository in the current folder.</li>
    <li><strong>Manual remote connection after init:</strong>
        <pre>git remote add origin &lt;url&gt;
git push -u origin main</pre>
        <p>Alternative to cloning.</p>
    </li>
    <li><code>git clone &lt;url&gt;</code>: Creates a local copy and sets <code>origin</code>.</li>
    <li><code>git status</code>: Shows staged/untracked changes.</li>
    <li><code>git add &lt;file&gt;</code>: Stage changes.</li>
    <li><code>git commit -m "message"</code>: Commit staged changes.</li>
    <li><code>git log --oneline --graph --decorate --all</code>: Visual commit history.</li>
</ul>
</section>

<section id="branching">
<h2>2. Branching & Divergence</h2>
<ul>
    <li><code>git branch &lt;name&gt;</code>: Create a new branch.</li>
    <li><code>git checkout &lt;branch&gt;</code> or <code>git switch &lt;branch&gt;</code>: Switch branches.</li>
    <li><code>git branch -d &lt;name&gt;</code>: Delete safely, <code>-D</code> force delete.</li>
</ul>
<p><strong>Diverged branches</strong> are when your local branch and remote both have unique commits:</p>

<button onclick="simulateDiverged()">Show Divergence</button>
<svg id="branching-graph" width="800" height="200"></svg>

<p><strong>Fast-forward:</strong> Local branch can be updated directly if no divergence exists:</p>
<button onclick="simulateFastForward()">Show Fast-Forward</button>
<svg id="fastforward-graph" width="800" height="100"></svg>
</section>

<section id="merge-rebase">
<h2>3. Merge and Rebase</h2>
<button onclick="simulateMerge()">Simulate Merge</button>
<button onclick="simulateRebase()">Simulate Rebase</button>
<svg id="merge-rebase-graph" width="800" height="250"></svg>
</section>

<section id="history-analysis">
<h2>4. History Analysis Commands</h2>
<ul>
    <li><code>git log</code>: Commit history.</li>
    <li><code>git blame &lt;file&gt;</code>: Who last changed each line.</li>
    <li><code>git bisect</code>: Binary search for buggy commit.</li>
    <li><code>git reflog</code>: History of HEAD, even across resets.</li>
</ul>
</section>

<section id="remote">
<h2>5. Remote Operations</h2>
<ul>
    <li><code>git fetch</code>: Get remote changes without merging.</li>
    <li><code>git pull</code>: Fetch + merge/rebase.</li>
    <li><code>git push</code>: Push local commits.</li>
    <li><code>git push origin &lt;branch/tag&gt;</code>: Push specific branch/tag.</li>
    <li><code>git push origin --delete &lt;branch&gt;</code>: Delete remote branch.</li>
    <li><code>git remote add/remove/rename</code>: Manage remotes.</li>
</ul>
</section>

<section id="advanced">
<h2>6. Advanced Commands</h2>
<ul>
    <li><code>git reset --soft/hard HEAD~1</code>: Move HEAD backward with/without keeping changes.</li>
    <li><code>git stash / git stash pop</code>: Temporarily save changes.</li>
    <li><code>git cherry-pick &lt;commit&gt;</code>: Apply a commit from another branch.</li>
    <li><code>git clean -fd</code>: Remove untracked files/directories.</li>
</ul>
</section>

<div class="tooltip" id="tooltip"></div>

<script>
/* ================= TOOLTIP ================= */
const tooltip = document.getElementById('tooltip');

function showTooltip(evt, msg) {
    tooltip.style.display = 'block';
    tooltip.style.left = evt.pageX + 10 + 'px';
    tooltip.style.top = evt.pageY + 10 + 'px';
    tooltip.innerHTML = msg;
}

function hideTooltip() {
    tooltip.style.display = 'none';
}

/* ================= HELPERS ================= */
function drawCommit(svg, x, y, id, msg) {
    const circle = document.createElementNS('http://www.w3.org/2000/svg', 'circle');
    circle.setAttribute('cx', x);
    circle.setAttribute('cy', y);
    circle.setAttribute('r', 10);
    circle.classList.add('commit');
    circle.addEventListener('mouseover', e => showTooltip(e, msg));
    circle.addEventListener('mouseout', hideTooltip);
    svg.appendChild(circle);

    const label = document.createElementNS('http://www.w3.org/2000/svg', 'text');
    label.setAttribute('x', x + 14);
    label.setAttribute('y', y + 5);
    label.textContent = id;
    svg.appendChild(label);
}

function drawLine(svg, x1, y1, x2, y2, color) {
    const line = document.createElementNS('http://www.w3.org/2000/svg', 'line');
    line.setAttribute('x1', x1);
    line.setAttribute('y1', y1);
    line.setAttribute('x2', x2);
    line.setAttribute('y2', y2);
    line.setAttribute('stroke', color);
    line.setAttribute('stroke-width', 3);
    svg.appendChild(line);
}

/* ================= DIVERGENCE ================= */
let divergedShown = false;

function simulateDiverged() {
    const svg = document.getElementById('branching-graph');
    svg.innerHTML = '';

    if (!divergedShown) {
        // BEFORE divergence (common ancestor)
        drawCommit(svg, 150, 50, 'B', 'Common ancestor commit');
    } else {
        // AFTER divergence
        drawLine(svg, 150, 50, 250, 20, '#2c3e50'); // remote
        drawLine(svg, 150, 50, 250, 90, '#27ae60'); // local

        drawCommit(svg, 150, 50, 'B', 'Common ancestor');
        drawCommit(svg, 250, 20, 'C', 'Remote commit');
        drawCommit(svg, 250, 90, 'D', 'Local commit');
    }

    divergedShown = !divergedShown;
}

/* ================= FAST-FORWARD ================= */
let fastForwardShown = false;

function simulateFastForward() {
    const svg = document.getElementById('fastforward-graph');
    svg.innerHTML = '';

    if (!fastForwardShown) {
        // BEFORE fast-forward
        drawLine(svg, 50, 50, 150, 50, '#2c3e50');
        drawLine(svg, 150, 50, 250, 50, '#2c3e50');

        drawCommit(svg, 50, 50, 'A', 'Initial commit');
        drawCommit(svg, 150, 50, 'B', 'Local HEAD');
        drawCommit(svg, 250, 50, 'C', 'Remote ahead');
    } else {
        // AFTER fast-forward
        drawLine(svg, 50, 50, 150, 50, '#2c3e50');
        drawLine(svg, 150, 50, 250, 50, '#2c3e50');

        drawCommit(svg, 50, 50, 'A', 'Initial commit');
        drawCommit(svg, 150, 50, 'B', 'Previous commit');
        drawCommit(svg, 250, 50, 'C', 'Local fast-forwarded');
    }

    fastForwardShown = !fastForwardShown;
}

/* ================= MERGE / REBASE ================= */
function drawBaseMergeGraph(svg) {
    svg.innerHTML = '';

    // base lines
    drawLine(svg, 100, 50, 200, 50, '#2c3e50');
    drawLine(svg, 200, 50, 300, 50, '#2c3e50');
    drawLine(svg, 200, 50, 200, 150, '#27ae60');
    drawLine(svg, 200, 150, 300, 150, '#27ae60');

    drawCommit(svg, 100, 50, 'A', 'Base commit');
    drawCommit(svg, 200, 50, 'B', 'Branch point');
    drawCommit(svg, 300, 50, 'C', 'Main branch');
    drawCommit(svg, 200, 150, 'D', 'Feature commit');
    drawCommit(svg, 300, 150, 'E', 'Feature commit');
}

function simulateMerge() {
    const svg = document.getElementById('merge-rebase-graph');
    drawBaseMergeGraph(svg);

    drawLine(svg, 300, 50, 400, 100, '#2c3e50');
    drawLine(svg, 300, 150, 400, 100, '#27ae60');

    drawCommit(svg, 400, 100, 'M', 'Merge commit');
}

function simulateRebase() {
    const svg = document.getElementById('merge-rebase-graph');
    svg.innerHTML = '';

    drawLine(svg, 100, 50, 200, 50, '#2c3e50');
    drawLine(svg, 200, 50, 300, 50, '#2c3e50');
    drawLine(svg, 300, 50, 400, 50, '#27ae60');
    drawLine(svg, 400, 50, 500, 50, '#27ae60');

    drawCommit(svg, 100, 50, 'A', 'Base commit');
    drawCommit(svg, 200, 50, 'B', 'Branch point');
    drawCommit(svg, 300, 50, 'C', 'Main branch');
    drawCommit(svg, 400, 50, "D'", 'Rebased commit');
    drawCommit(svg, 500, 50, "E'", 'Rebased commit');
}

/* ================= INITIAL RENDER ================= */
simulateDiverged();
simulateFastForward();
simulateMerge();
</script>


<div class="tooltip" id="tooltip"></div>
</body>
</html>
